/*!
 * A cross-browser implementation of the new setImmediate API.
 * github.com/YuzuJS/setImmediate
 * compiled with closure-compiler.appspot.com/home
 */
(function(b,p){function g(a){m[q]=h.apply(p,a);return q++}function h(a){var b=[].slice.call(arguments,1);return function(){"function"===typeof a?a.apply(p,b):(new Function(""+a))()}}function d(a){if(n)setTimeout(h(d,a),0);else{var b=m[a];if(b){n=!0;try{b()}finally{r(a),n=!1}}}}function r(a){delete m[a]}function t(){e=function(){var a=g(arguments);process.nextTick(h(d,a));return a}}function u(){if(b.postMessage&&!b.importScripts){var a=!0,k=b.onmessage;b.onmessage=function(){a=!1};b.postMessage("","*");b.onmessage=k;return a}}function v(){var a="setImmediate$"+Math.random()+"$",k=function(c){c.source===b&&"string"===typeof c.data&&0===c.data.indexOf(a)&&d(+c.data.slice(a.length))};b.addEventListener?b.addEventListener("message",k,!1):b.attachEvent("onmessage",k);e=function(){var c=g(arguments);b.postMessage(a+c,"*");return c}}function w(){var a=new MessageChannel;a.port1.onmessage=function(a){d(a.data)};e=function(){var b=g(arguments);a.port2.postMessage(b);return b}}function x(){var a=l.documentElement;e=function(){var b=g(arguments),c=l.createElement("script");c.onreadystatechange=function(){d(b);c.onreadystatechange=null;a.removeChild(c);c=null};a.appendChild(c);return b}}function y(){e=function(){var a=g(arguments);setTimeout(h(d,a),0);return a}}if(!b.setImmediate){var q=1,m={},n=!1,l=b.document,e,f=Object.getPrototypeOf&&Object.getPrototypeOf(b),f=f&&f.setTimeout?f:b;"[object process]"==={}.toString.call(b.process)?t():u()?v():b.MessageChannel?w():l&&"onreadystatechange"in l.createElement("script")?x():y();f.setImmediate=e;f.clearImmediate=r}})("undefined"===typeof self?"undefined"===typeof global?this:global:self);
