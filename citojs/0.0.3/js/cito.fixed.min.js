/*!
 * modified for babel citojs - v0.0.3
 * github.com/joelrich/citojs
 * gist.github.com/englishextra/359e2fa19c14319a385cc4b47af0b597
 * jsfiddle.net/englishextra/L9zrqd4L/
 * closure-compiler.appspot.com/code/jscb32351779a4dd18f67fc6a53c7af5d44/default.js
 * removed UMD wrapper
 * Copyright (c) 2015, Joel Richard
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
var cito=function(){function v(a){return"string"===typeof a}function E(a,b){var c=typeof a;"string"===c?a={tag:"#",children:a}:"function"===c&&(a=a(b),a=void 0===a?b:E(a,b));return a}function F(a,b,c){c=E(b,c);b!==c&&a&&(a.children=c);return c}function Q(a,b,c){a=F(null,z(a,b));a.dom||(a.dom=c.firstChild,"<"===a.tag&&(a.domLength=c.childNodes.length));return a}function w(a,b,c){var d=a[b];c=E(d,c);d!==c&&(a[b]=c);return c}function G(a,b,c){"function"===typeof b&&(b=b(c),void 0===b&&(b=c),a.children=b);return b}function z(a,b){return 1===b?a[0]:a}function R(a,b,c){var d=b.dom;b=b.domLength||1;var e=c&&c.dom;if(d!==e)for(;b--;)c=0<b?d.nextSibling:null,e?a.insertBefore(d,e):a.appendChild(d),d=c}function K(a,b,c){if(a.insertAdjacentHTML){var d,e,f;if(L||M){var l="beforebegin"===b?a.previousSibling:"beforeend"===b?a.lastChild:null;l&&3===l.nodeType&&(d=l,M&&0===l.length&&(f=!0,l.nodeValue=" "),L&&(e=l.length))}a.insertAdjacentHTML(b,c);d&&(L&&d.length!==e&&d.splitText(e),M&&f&&(d.nodeValue=""))}else if(r.innerHTML=c,"beforebegin"===b)for(b=a.parentNode;r.firstChild;)b.insertBefore(r.firstChild,a);else if("beforeend"===b)for(;r.firstChild;)a.appendChild(r.firstChild)}function H(a,b,c,d){if(c){var e=c.dom;d?1===(c.domLength||1)?(N(c),a.replaceChild(b,e)):(a.insertBefore(b,e),A(a,c)):a.insertBefore(b,e)}else a.appendChild(b)}function x(a,b,c,d,e,f){if(S){var l=T(a);b?d||b.hasChildNodes()?(d?(c=d.dom.previousSibling,K(d.dom,"beforebegin",l),e&&A(b,d)):(c=b.lastChild,K(b,"beforeend",l)),b=c?c.nextSibling:b.firstChild):(b.innerHTML=l,b=b.firstChild):(r.innerHTML=l,b=r.removeChild(r.firstChild));I(b,a)}else{var g=a.tag,l=a.children;switch(g){case void 0:return X(a,l,b,c,d,e);case"#":if(f){O(b,l);return}c=q.createTextNode(l);break;case"!":c=q.createComment(l);break;case"<":if(l){if(f)b.innerHTML=l;else{g=b.childNodes;f=g.length;if(d){c=d.dom;var h=c.previousSibling;K(c,"beforebegin",l);c=h?h.nextSibling:b.firstChild}else K(b,"beforeend",l),c=g[f];a.dom=c;a.domLength=g.length-f;e&&d&&A(b,d)}return}c=q.createTextNode("");break;default:switch(g){case"svg":f="http://www.w3.org/2000/svg";break;case"math":f="http://www.w3.org/1998/Math/MathML";break;default:f=c}c=(h=a.attrs)&&h.is;f?(a.ns=f,c=c?q.createElementNS(f,g,c):q.createElementNS(f,g)):c=c?q.createElement(g,c):q.createElement(g);a.dom=c;S&&b&&H(b,c,d,e);"string"===typeof l?O(c,l,!1):Y(c,a,f,l,!1);h&&Z(c,g,f,h);(l=a.events)&&U(c,a,l);!S&&b&&H(b,c,d,e);(b=l&&l.$created)&&P(b,"$created",c,a);return}a.dom=c;b&&H(b,c,d,e)}}function P(a,b,c,d,e,f){b={type:b,target:c,virtualNode:d};e&&(b[e]=f);if(a instanceof Array)for(e=0;e<a.length&&!1!==a[e].call(c,b);e++);else a.call(c,b)}function T(a,b){var c=a.tag,d=a.children;switch(c){case"#":return aa(d)+C;case"!":return"\x3c!--"+(""+d).replace(/-{2,}/g,"-")+"--\x3e";case"<":return d+C;default:var e;if(c){var f=a.attrs;if("select"===c&&f)b={selectedIndex:f.selectedIndex,value:f.value,optionIndex:0};else if("option"===c&&b){if(b.value&&b.value===f.value||void 0!==b.selectedIndex&&b.selectedIndex===b.optionIndex)f.selected=!0;b.optionIndex++}e="<"+c;if(f){e+=" ";for(var l in f){var g=f[l];if(!1!==g&&("select"!==c||"value"!==l&&"selectedIndex"!==l))if("textarea"===c&&"value"===l)d=g;else{if(!0===g)g="";else if("style"===l&&!v(g)){var h="",k;for(k in g)h+=k+": "+g[k]+"; ";g=h}var h=l,m=typeof g,g=""+g;"number"!==m&&(g=ba?g.split("&").join("&amp;").split('"').join("&quot;"):g.replace(/&/g,"&amp;").replace(/"/g,"&quot;"));e+=" "+(h+'="'+g+'"')}}}}else e="";c&&(e+=">");d=G(a,d);f=y(d);if(1<f)for(f=0,l=d.length;f<l;f++)e+=T(w(d,f),b);else 0!==f?(d=z(d,f),v(d)?(e+=aa(d),c&&d||(e+=C)):e+=T(F(a,d),b)):c||(e+=C);c&&(e+="</"+c+">");return e}}function I(a,b){var c=b.tag;if(c){b.dom=a;var d;switch(c){case"#":c=a.nodeValue;d=c.indexOf(C);-1!==d&&(d+1<c.length&&a.splitText(d+1),a.nodeValue=c.substr(0,d));break;case"!":break;case"<":for(var e=0,f;a;a=a.nextSibling)if(e++,3===a.nodeType)if(c=a.nodeValue,1<e&&c===C){f=a.nextSibling;a.parentNode.removeChild(a);e--;break}else if(d=c.indexOf(C),-1!==d){d+1<c.length&&a.splitText(d+1);a.nodeValue=c.substr(0,d);f=a.nextSibling;break}b.domLength=e;return f;default:f=b.children;c=y(f);if(1<c)for(f=b.children,c=a.firstChild,d=0,e=f.length;d<e;d++)c=I(c,f[d]);else 0!==c&&((f=z(f,c),v(f))?f||(a.firstChild.nodeValue=""):I(a.firstChild,f));if(f=b.events)U(a,b,f),(f=f.$created)&&P(f,"$created",a,b)}return a.nextSibling}f=a;d=b.children;c=y(d);if(0===c)1<f.length&&f.splitText(1),f.nodeValue="",b.dom=f,c=f.nextSibling;else{if(1<c){c=f;for(f=0;f<d.length;f++)c=I(c,d[f]);f=d[0].dom}else d=F(b,z(d,c)),c=I(f,d),f=d.dom;b.dom=f;for(d=0;f!==c;)d++,f=f.nextSibling;b.domLength=d}return c}function aa(a){a=""+a;ka?(r.innerText=a,a=r.innerHTML):a=ba?a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return a}function X(a,b,c,d,e,f){b=G(a,b);var l=y(b),g;d&&(a.ns=d);if(0===l)b=q.createTextNode(""),H(c,b,e,f);else if(1<l){for(var h=g=0,k=b.length;h<k;h++)l=w(b,h),x(l,c,d,e,!1),g+=l.domLength||1;b=b[0].dom;f&&A(c,e)}else l=F(a,z(b,l)),x(l,c,d,e,f),b=l.dom,g=l.domLength;a.dom=b;a.domLength=g}function Z(a,b,c,d,e,f){var l,g;if(d)for(g in d){var h=!1,k=d[g];if("style"===g){var m=e&&e[g];if(m!==k){var n=a,p=d,u=!1,h=void 0;if(!(v(k)||ca&&m&&!v(m))){var q="";if(k)for(h in k)q+=h+": "+k[h]+"; ";k=q;ca||(p.style=k)}n=n.style;if(v(k))n.cssText=k,u=!0;else{if(k)for(h in k)p=k[h],m&&m[h]===p||(u=p.indexOf("!important"),-1!==u?n.setProperty(h,p.substr(0,u),"important"):(m&&(u=m[h])&&-1!==u.indexOf("!important")&&n.removeProperty(h),n.setProperty(h,p,"")),u=!0);if(m)for(h in m)k&&void 0!==k[h]||(n.removeProperty(h),u=!0)}h=u}}else if(da(b,g))a[g]!==k&&(a[g]=k,h=!0);else if(!e||e[g]!==k){if("class"!==g||c)if(m=a,h=g,!1===k)m.removeAttribute(h);else{!0===k&&(k="");n=h.indexOf(":");u=void 0;if(-1!==n)switch(h.substr(0,n)){case"xlink":u="http://www.w3.org/1999/xlink"}u?m.setAttributeNS(u,h,k):m.setAttribute(h,k)}else a.className=k;h=!0}h&&f&&(l||(l=[])).push(g)}if(e)for(g in e)d&&void 0!==d[g]||("class"!==g||c?da(b,g)||a.removeAttribute(g):a.className="",f&&(l||(l=[])).push(g));return l}function U(a,b,c,d){var e;if(c)for(e in a.virtualNode=b,c)if(!d||!d[e]){b=a;var f=e;"$"!==f[0]&&(ea?b.addEventListener(f,J,!1):(f="on"+f,f in b?b[f]=J:b.attachEvent(f,J)))}if(d)for(e in d)c&&c[e]||fa(a,e)}function da(a,b){switch(a){case"input":return"value"===b||"checked"===b;case"textarea":return"value"===b;case"select":return"value"===b||"selectedIndex"===b;case"option":return"selected"===b}}function fa(a,b){if("$"!==b[0])if(ea)a.removeEventListener(b,J,!1);else{var c="on"+b;c in a?a[c]=null:a.detachEvent(c,J)}}function Y(a,b,c,d,e){d=G(b,d);var f=y(d);if(1<f)for(b=0,e=d.length;b<e;b++)x(w(d,b),a,c);else 0!==f&&(d=z(d,f),!e&&v(d)?O(a,d):(d=F(b,d),x(d,a,c,null,!1,!e)))}function y(a){return a instanceof Array?a.length:a||v(a)?-1:0}function ga(a,b,c){if(1<c){c=0;for(var d=b.length;c<d;c++)A(a,b[c])}else 0!==c&&(v(b)?a.removeChild(a.firstChild):A(a,Q(b,c,a)))}function A(a,b){N(b);for(var c=b.dom,d=b.domLength||1,e;d--;)e=0<d?c.nextSibling:null,a.removeChild(c),c=e}function O(a,b,c){if(b)la?a.textContent=b:a.innerText=b;else{if(c)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(q.createTextNode(""))}}function V(a,b,c,d,e,f,l){e=G(b,e,d);if(e!==d){var g=y(d);if(0===g)Y(a,b,c,e,!1);else{var h=y(e),k,m;if(0===h)ga(a,d,g);else{if(2>h){m=z(e,h);if(!f&&v(m)){if(h===g){k=z(d,g);if(m===k)return;if(v(k)){a.firstChild.nodeValue=m;return}}ha(d,g);O(a,m,!0);return}if(2>g){k=Q(d,g,a);m=F(b,m,k);D(k,m,a,c,null,0,l,!f);return}}-1===h&&(b.children=e=[e]);2>g&&(k=Q(d,g,a),1===g?d[0]=k:d=[k]);k=d.length;m=e.length;b=k-1;var h=e.length-1,g=f=0,n=!0;a:for(;n&&f<=b&&g<=h;){var n=!1,p,q,r,t;p=d[f];for(r=w(e,g,p);p.key===r.key;){D(p,r,a,c,d,f+1,l);f++;g++;if(f>b||g>h)break a;p=d[f];r=w(e,g,p);n=!0}q=d[b];for(t=w(e,h);q.key===t.key;){D(q,t,a,c,e,h+1,l);b--;h--;if(f>b||g>h)break a;q=d[b];t=w(e,h);n=!0}for(;p.key===t.key;){n=h+1<m?e[h+1]:l;D(p,t,a,c,null,0,n);R(a,t,n);f++;h--;if(f>b||g>h)break a;p=d[f];t=w(e,h);n=!0}for(;q.key===r.key;){n=f<k?d[f]:l;D(q,r,a,c,null,0,n);R(a,r,n);b--;g++;if(f>b||g>h)break a;q=d[b];r=w(e,g);n=!0}}if(f>b)for(n=h+1<m?w(e,h+1):l,p=g;p<=h;p++)x(w(e,p),a,c,n);else if(g>h)for(c=d,d=f,e=b+1;d<e;d++)A(a,c[d]);else{n=d[b+1];q={};for(p=b;p>=f;p--)k=d[p],k.next=n,n=q[k.key]=k;n=h+1<m?w(e,h+1):l;for(p=h;p>=g;p--)m=e[p],l=m.key,(k=q[l])?(q[l]=null,D(k,m,a,c,null,0,n),a.nextSibling!=(n&&n.dom)&&R(a,m,n)):x(m,a,c,n),n=m;for(p=f;p<=b;p++)k=d[p],null!==q[k.key]&&A(a,k)}}}}}function J(a){a||(a=window.event,a.preventDefault||(a.preventDefault=ma,a.stopPropagation=na,a.defaultPrevented=!1===a.returnValue,a.target=a.srcElement),a.currentTarget=this.nodeType?this:a.target);a.stopImmediatePropagation=oa;var b=a.currentTarget,c=b.virtualNode.events[a.type];if(c instanceof Array)for(var d=0,e=c.length;d<e;d++){if(ia(c[d],b,a),W){W=!1;break}}else ia(c,b,a)}function ma(){this.defaultPrevented=!0;this.returnValue=!1}function na(){this.cancelBubble=!0}function oa(){W=!0;this.stopPropagation()}function ia(a,b,c){try{!1===a.call(b,c)&&c.preventDefault()}catch(d){pa.error(d.stack||d)}}function D(a,b,c,d,e,f,l,g){if(b!==a){var h=b.tag;if(a.tag!==h)x(b,c,d,a,!0);else{var k=a.dom,m=a.children,n=b.children;switch(h){case void 0:a:if(h=e&&f<e.length?e[f]:l,k=G(b,n,m),k!==m){n=y(k);e=y(m);var p;d&&(b.ns=d);if(0===n)0===e?a=a.dom:(ga(c,m,e),a=q.createTextNode(""),H(c,a,h));else if(0===e){c.removeChild(a.dom);X(b,k,c,d,h);break a}else if(V(c,b,d,m,k,!0,h),k=b.children,k instanceof Array)for(a=k[0].dom,c=p=0,m=k.length;c<m;c++)p+=k[c].domLength||1;else a=k.dom,p=k.domLength;b.dom=a;b.domLength=p}break;case"#":case"!":m!==n&&(k.nodeValue=n);b.dom=k;break;case"<":m!==n?x(b,c,null,a,!0,g):(b.dom=a.dom,b.domLength=a.domLength);break;default:if(p=b.attrs,e=a.attrs,(p&&p.is)!==(e&&e.is))x(b,c,d,a,!0);else{if(c=a.ns)b.ns=c;b.dom=k;n!==m&&V(k,b,c,m,n,!1);m=b.events;a=a.events;p!==e&&(d=m&&m.$changed,(c=Z(k,h,c,p,e,!!d))&&P(d,"$changed",k,b,"changes",c));m!==a&&U(k,b,m,a)}}}}}function N(a){if(!v(a)){var b=a.dom;if(b){var c=a.events;if(c){for(var d in c)fa(b,d);(c=c.$destroyed)&&P(c,"$destroyed",b,a)}b.virtualNode&&(b.virtualNode=void 0)}(a=a.children)&&ha(a,y(a))}}function ha(a,b){if(1<b)for(var c=0,d=a.length;c<d;c++)N(a[c]);else 0!==b&&N(z(a,b))}function ja(a){a&&a!=q.body&&a!=q.activeElement&&a.focus()}var q=window.document,t=function(){},pa=window.console||{warn:t,error:t},t=window.navigator.userAgent,ka=-1!==t.indexOf("WebKit"),ba=-1!==t.indexOf("Firefox"),S=-1!==t.indexOf("Trident"),r=q.createElement("div"),la="textContent"in q,ea="addEventListener"in q,t="createRange"in q,ca="setProperty"in r.style,B=q.createElement("p"),L,M;B.insertAdjacentHTML&&(B.appendChild(q.createTextNode("a")),B.insertAdjacentHTML("beforeend","b"),L=1===B.childNodes.length,B=q.createElement("p"),B.appendChild(q.createTextNode("")),B.insertAdjacentHTML("beforeend","<b>"),M=3!==B.firstChild.nodeType);var C="\u0003";t&&q.createRange();var W=!1;return{vdom:{create:function(a){a=E(a);x(a);return a},append:function(a,b){b=E(b);x(b,a);return b},update:function(a,b){var c=q.activeElement;b=E(b,a);D(a,b,a.dom.parentNode);var d=b,e;for(e in d)a[e]=d[e];for(e in a)void 0===d[e]&&(a[e]=void 0);ja(c);return a},updateChildren:function(a,b){var c=q.activeElement,d=a.children;d!==b&&V(a.dom,a,a.ns,d,b,!a.tag);ja(c)},remove:function(a){A(a.dom.parentNode,a)}}}}();
