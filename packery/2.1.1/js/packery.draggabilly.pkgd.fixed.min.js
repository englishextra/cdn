/*!
 * modified for babel Packery PACKAGED v2.1.1
 * Gapless, draggable grid layouts
 * Licensed GPLv3 for open source use
 * or Packery Commercial License for commercial use
 * packery.metafizzy.co
 * Copyright 2016 Metafizzy
 * removed jQuery support
 * removed AMD, CommonJS support
 * changed this or global to window as argument
 * added if("undefined"==typeof window||!("document"in window))
 * {return console.log("window is undefined or document is not in window"),!1;}
 * won't pass jshint
 * closure-compiler.appspot.com/code/jsc791a430ae9a0fab140f8a5be98233036/default.js
 */
;(function(b,m){if("undefined"==typeof b||!("document"in b))return console.log("window is undefined or document is not in window"),!1;b.getSize=m()})(window,function(){function b(a){var c=parseFloat(a);return-1==a.indexOf("%")&&!isNaN(c)&&c}function m(){}function d(c){(c=getComputedStyle(c))||a("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1");return c}function k(a){if(!l){l=!0;var c=document.createElement("div");c.style.width="200px";c.style.padding="1px 2px 3px 4px";c.style.borderStyle="solid";c.style.borderWidth="1px 2px 3px 4px";c.style.boxSizing="border-box";var g=document.body||document.documentElement;g.appendChild(c);var e=d(c);k.isBoxSizeOuter=p=200==b(e.width);g.removeChild(c)}"string"==typeof a&&(a=document.querySelector(a));if(a&&"object"==typeof a&&a.nodeType){g=d(a);if("none"==g.display){c={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(g=0;g<n;g++)c[h[g]]=0;return c}c={};c.width=a.offsetWidth;c.height=a.offsetHeight;a=c.isBorderBox="border-box"==g.boxSizing;for(e=0;e<n;e++){var r=h[e],f=parseFloat(g[r]);c[r]=isNaN(f)?0:f}var e=c.paddingLeft+c.paddingRight,r=c.paddingTop+c.paddingBottom,f=c.marginLeft+c.marginRight,q=c.marginTop+c.marginBottom,u=c.borderLeftWidth+c.borderRightWidth,m=c.borderTopWidth+c.borderBottomWidth;a=a&&p;var v=b(g.width);!1!==v&&(c.width=v+(a?0:e+u));g=b(g.height);!1!==g&&(c.height=g+(a?0:r+m));c.innerWidth=c.width-(e+u);c.innerHeight=c.height-(r+m);c.outerWidth=c.width+f;c.outerHeight=c.height+q;return c}}var a="undefined"==typeof console?m:function(a){console.error(a)},h="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" "),n=h.length,l=!1,p;return k});(function(b,m){window.EvEmitter=m()})(window,function(){function b(){}var m=b.prototype;m.on=function(d,b){if(d&&b){var a=this._events=this._events||{},a=a[d]=a[d]||[];-1==a.indexOf(b)&&a.push(b);return this}};m.once=function(d,b){if(d&&b){this.on(d,b);var a=this._onceEvents=this._onceEvents||{};(a[d]=a[d]||{})[b]=!0;return this}};m.off=function(d,b){var a=this._events&&this._events[d];if(a&&a.length){var h=a.indexOf(b);-1!=h&&a.splice(h,1);return this}};m.emitEvent=function(d,b){var a=this._events&&this._events[d];if(a&&a.length){var h=0,n=a[h];b=b||[];for(var l=this._onceEvents&&this._onceEvents[d];n;){var k=l&&l[n];k&&(this.off(d,n),delete l[n]);n.apply(this,b);h+=k?0:1;n=a[h]}return this}};return b});(function(b,m){b.matchesSelector=m()})(window,function(){var b=function(){var b=Element.prototype;if(b.matches)return"matches";if(b.matchesSelector)return"matchesSelector";for(var d=["webkit","moz","ms","o"],k=0;k<d.length;k++){var a=d[k]+"MatchesSelector";if(b[a])return a}}();return function(m,d){return m[b](d)}});(function(b,m){b.fizzyUIUtils=m(b,b.matchesSelector)})(window,function(b,m){var d={extend:function(a,h){for(var b in h)a[b]=h[b];return a},modulo:function(a,h){return(a%h+h)%h},makeArray:function(a){var h=[];if(Array.isArray(a))h=a;else if(a&&"number"==typeof a.length)for(var b=0;b<a.length;b++)h.push(a[b]);else h.push(a);return h},removeFrom:function(a,h){var b=a.indexOf(h);-1!=b&&a.splice(b,1)},getParent:function(a,h){for(;a!=document.body;)if(a=a.parentNode,m(a,h))return a},getQueryElement:function(a){return"string"==typeof a?document.querySelector(a):a},handleEvent:function(a){var h="on"+a.type;if(this[h])this[h](a)},filterFindElements:function(a,h){a=d.makeArray(a);var b=[];a.forEach(function(a){if(a instanceof HTMLElement)if(h){m(a,h)&&b.push(a);a=a.querySelectorAll(h);for(var d=0;d<a.length;d++)b.push(a[d])}else b.push(a)});return b},debounceMethod:function(a,b,d){var h=a.prototype[b],k=b+"Timeout";a.prototype[b]=function(){var a=this[k];a&&clearTimeout(a);var b=arguments,g=this;this[k]=setTimeout(function(){h.apply(g,b);delete g[k]},d||100)}},docReady:function(a){"complete"==document.readyState?a():document.addEventListener("DOMContentLoaded",a)},toDashed:function(a){return a.replace(/(.)([A-Z])/g,function(a,b,d){return b+"-"+d}).toLowerCase()}},k=b.console;d.htmlInit=function(a,h){d.docReady(function(){var n=d.toDashed(h),l="data-"+n,m=document.querySelectorAll("["+l+"]"),n=document.querySelectorAll(".js-"+n),m=d.makeArray(m).concat(d.makeArray(n)),c=l+"-options",t=b.jQuery;m.forEach(function(g){var e=g.getAttribute(l)||g.getAttribute(c),b;try{b=e&&JSON.parse(e)}catch(f){k&&k.error("Error parsing "+l+" on "+g.className+": "+f);return}e=new a(g,b);t&&t.data(g,h,e)})})};return d});(function(b,m){b.Outlayer={};b.Outlayer.Item=m(b.EvEmitter,b.getSize)})(window,function(b,m){function d(a,c){a&&(this.element=a,this.layout=c,this.position={x:0,y:0},this._create())}var k=document.documentElement.style,a="string"==typeof k.transition?"transition":"WebkitTransition",k="string"==typeof k.transform?"transform":"WebkitTransform",h={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[a],n={transform:k,transition:a,transitionDuration:a+"Duration",transitionProperty:a+"Property",transitionDelay:a+"Delay"},l=d.prototype=Object.create(b.prototype);l.constructor=d;l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};l.handleEvent=function(a){var g="on"+a.type;if(this[g])this[g](a)};l.getSize=function(){this.size=m(this.element)};l.css=function(a){var g=this.element.style,c;for(c in a)g[n[c]||c]=a[c]};l.getPosition=function(){var a=getComputedStyle(this.element),c=this.layout._getOption("originLeft"),b=this.layout._getOption("originTop"),f=a[c?"left":"right"],q=a[b?"top":"bottom"],a=this.layout.size,f=-1!=f.indexOf("%")?parseFloat(f)/100*a.width:parseInt(f,10),q=-1!=q.indexOf("%")?parseFloat(q)/100*a.height:parseInt(q,10),f=isNaN(f)?0:f,q=isNaN(q)?0:q,f=f-(c?a.paddingLeft:a.paddingRight),q=q-(b?a.paddingTop:a.paddingBottom);this.position.x=f;this.position.y=q};l.layoutPosition=function(){var a=this.layout.size,c={},b=this.layout._getOption("originLeft"),f=this.layout._getOption("originTop"),q=b?"right":"left";c[b?"left":"right"]=this.getXValue(this.position.x+a[b?"paddingLeft":"paddingRight"]);c[q]="";b=f?"bottom":"top";c[f?"top":"bottom"]=this.getYValue(this.position.y+a[f?"paddingTop":"paddingBottom"]);c[b]="";this.css(c);this.emitEvent("layout",[this])};l.getXValue=function(a){var c=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!c?a/this.layout.size.width*100+"%":a+"px"};l.getYValue=function(a){var c=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&c?a/this.layout.size.height*100+"%":a+"px"};l._transitionTo=function(a,c){this.getPosition();var g=this.position.x,f=this.position.y,e=parseInt(a,10),b=parseInt(c,10),e=e===this.position.x&&b===this.position.y;this.setPosition(a,c);e&&!this.isTransitioning?this.layoutPosition():(e={},e.transform=this.getTranslate(a-g,c-f),this.transition({to:e,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0}))};l.getTranslate=function(a,c){var g=this.layout._getOption("originLeft"),f=this.layout._getOption("originTop");return"translate3d("+(g?a:-a)+"px, "+(f?c:-c)+"px, 0)"};l.goTo=function(a,c){this.setPosition(a,c);this.layoutPosition()};l.moveTo=l._transitionTo;l.setPosition=function(a,c){this.position.x=parseInt(a,10);this.position.y=parseInt(c,10)};l._nonTransition=function(a){this.css(a.to);a.isCleaning&&this._removeStyles(a.to);for(var c in a.onTransitionEnd)a.onTransitionEnd[c].call(this)};l.transition=function(a){if(parseFloat(this.layout.options.transitionDuration)){var c=this._transn,g;for(g in a.onTransitionEnd)c.onEnd[g]=a.onTransitionEnd[g];for(g in a.to)c.ingProperties[g]=!0,a.isCleaning&&(c.clean[g]=!0);a.from&&this.css(a.from);this.enableTransition(a.to);this.css(a.to);this.isTransitioning=!0}else this._nonTransition(a)};var p="opacity,"+function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}(k);l.enableTransition=function(){if(!this.isTransitioning){var a=this.layout.options.transitionDuration;this.css({transitionProperty:p,transitionDuration:"number"==typeof a?a+"ms":a,transitionDelay:this.staggerDelay||0});this.element.addEventListener(h,this,!1)}};l.onwebkitTransitionEnd=function(a){this.ontransitionend(a)};l.onotransitionend=function(a){this.ontransitionend(a)};var c={"-webkit-transform":"transform"};l.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,g=c[a.propertyName]||a.propertyName;delete b.ingProperties[g];var f;a:{f=b.ingProperties;for(var q in f){f=!1;break a}f=!0}f&&this.disableTransition();g in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[g]);g in b.onEnd&&(b.onEnd[g].call(this),delete b.onEnd[g]);this.emitEvent("transitionEnd",[this])}};l.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(h,this,!1);this.isTransitioning=!1};l._removeStyles=function(a){var c={},b;for(b in a)c[b]="";this.css(c)};var t={transitionProperty:"",transitionDuration:"",transitionDelay:""};l.removeTransitionStyles=function(){this.css(t)};l.stagger=function(a){a=isNaN(a)?0:a;this.staggerDelay=a+"ms"};l.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:""});this.emitEvent("remove",[this])};l.remove=function(){a&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()};l.reveal=function(){delete this.isHidden;this.css({display:""});var a=this.layout.options,c={},b=this.getHideRevealTransitionEndProperty("visibleStyle");c[b]=this.onRevealTransitionEnd;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0,onTransitionEnd:c})};l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")};l.getHideRevealTransitionEndProperty=function(a){a=this.layout.options[a];if(a.opacity)return"opacity";for(var c in a)return c};l.hide=function(){this.isHidden=!0;this.css({display:""});var a=this.layout.options,c={},b=this.getHideRevealTransitionEndProperty("hiddenStyle");c[b]=this.onHideTransitionEnd;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:c})};l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))};l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return d});(function(b,m){b.Outlayer=m(b,b.EvEmitter,b.getSize,b.fizzyUIUtils,b.Outlayer.Item)})(window,function(b,m,d,k,a){function h(a,c){var f=k.getQueryElement(a);f?(this.element=f,p&&(this.$element=p(this.element)),this.options=k.extend({},this.constructor.defaults),this.option(c),f=++t,this.element.outlayerGUID=f,g[f]=this,this._create(),this._getOption("initLayout")&&this.layout()):l&&l.error("Bad element for "+this.constructor.namespace+": "+(f||a))}function n(a){function f(){a.apply(this,arguments)}f.prototype=Object.create(a.prototype);return f.prototype.constructor=f}var l=b.console,p=b.jQuery,c=function(){},t=0,g={};h.namespace="outlayer";h.Item=a;h.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var e=h.prototype;k.extend(e,m.prototype);e.option=function(a){k.extend(this.options,a)};e._getOption=function(a){var f=this.constructor.compatOptions[a];return f&&void 0!==this.options[f]?this.options[f]:this.options[a]};h.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"};e._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);k.extend(this.element.style,this.options.containerStyle);this._getOption("resize")&&this.bindResize()};e.reloadItems=function(){this.items=this._itemize(this.element.children)};e._itemize=function(a){a=this._filterFindItemElements(a);for(var f=this.constructor.Item,c=[],b=0;b<a.length;b++){var g=new f(a[b],this);c.push(g)}return c};e._filterFindItemElements=function(a){return k.filterFindElements(a,this.options.itemSelector)};e.getItemElements=function(){return this.items.map(function(a){return a.element})};e.layout=function(){this._resetLayout();this._manageStamps();var a=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==a?a:!this._isLayoutInited);this._isLayoutInited=!0};e._init=e.layout;e._resetLayout=function(){this.getSize()};e.getSize=function(){this.size=d(this.element)};e._getMeasurement=function(a,c){var f=this.options[a],b;f?("string"==typeof f?b=this.element.querySelector(f):f instanceof HTMLElement&&(b=f),this[a]=b?d(b)[c]:f):this[a]=0};e.layoutItems=function(a,c){a=this._getItemsForLayout(a);this._layoutItems(a,c);this._postLayout()};e._getItemsForLayout=function(a){return a.filter(function(a){return!a.isIgnored})};e._layoutItems=function(a,c){this._emitCompleteOnItems("layout",a);if(a&&a.length){var f=[];a.forEach(function(a){var b=this._getItemLayoutPosition(a);b.item=a;b.isInstant=c||a.isLayoutInstant;f.push(b)},this);this._processLayoutQueue(f)}};e._getItemLayoutPosition=function(){return{x:0,y:0}};e._processLayoutQueue=function(a){this.updateStagger();a.forEach(function(a,c){this._positionItem(a.item,a.x,a.y,a.isInstant,c)},this)};e.updateStagger=function(){var a=this.options.stagger;if(null===a||void 0===a)this.stagger=0;else{if("number"!=typeof a){var c=a.match(/(^\d*\.?\d*)(\w*)/),a=c&&c[1],c=c&&c[2];a.length?(a=parseFloat(a),a*=r[c]||1):a=0}return this.stagger=a}};e._positionItem=function(a,c,b,g,e){g?a.goTo(c,b):(a.stagger(e*this.stagger),a.moveTo(c,b))};e._postLayout=function(){this.resizeContainer()};e.resizeContainer=function(){if(this._getOption("resizeContainer")){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}};e._getContainerSize=c;e._setContainerMeasure=function(a,c){if(void 0!==a){var f=this.size;f.isBorderBox&&(a+=c?f.paddingLeft+f.paddingRight+f.borderLeftWidth+f.borderRightWidth:f.paddingBottom+f.paddingTop+f.borderTopWidth+f.borderBottomWidth);a=Math.max(a,0);this.element.style[c?"width":"height"]=a+"px"}};e._emitCompleteOnItems=function(a,c){function f(){g.dispatchEvent(a+"Complete",null,[c])}function b(){h++;h==e&&f()}var g=this,e=c.length;if(c&&e){var h=0;c.forEach(function(c){c.once(a,b)})}else f()};e.dispatchEvent=function(a,c,b){var f=c?[c].concat(b):b;this.emitEvent(a,f);p&&(this.$element=this.$element||p(this.element),c?(c=p.Event(c),c.type=a,this.$element.trigger(c,b)):this.$element.trigger(a,b))};e.ignore=function(a){if(a=this.getItem(a))a.isIgnored=!0};e.unignore=function(a){(a=this.getItem(a))&&delete a.isIgnored};e.stamp=function(a){if(a=this._find(a))this.stamps=this.stamps.concat(a),a.forEach(this.ignore,this)};e.unstamp=function(a){(a=this._find(a))&&a.forEach(function(a){k.removeFrom(this.stamps,a);this.unignore(a)},this)};e._find=function(a){if(a)return"string"==typeof a&&(a=this.element.querySelectorAll(a)),a=k.makeArray(a)};e._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))};e._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),c=this.size;this._boundingRect={left:a.left+c.paddingLeft+c.borderLeftWidth,top:a.top+c.paddingTop+c.borderTopWidth,right:a.right-(c.paddingRight+c.borderRightWidth),bottom:a.bottom-(c.paddingBottom+c.borderBottomWidth)}};e._manageStamp=c;e._getElementOffset=function(a){var c=a.getBoundingClientRect(),b=this._boundingRect;a=d(a);return{left:c.left-b.left-a.marginLeft,top:c.top-b.top-a.marginTop,right:b.right-c.right-a.marginRight,bottom:b.bottom-c.bottom-a.marginBottom}};e.handleEvent=k.handleEvent;e.bindResize=function(){b.addEventListener("resize",this);this.isResizeBound=!0};e.unbindResize=function(){b.removeEventListener("resize",this);this.isResizeBound=!1};e.onresize=function(){this.resize()};k.debounceMethod(h,"onresize",100);e.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()};e.needsResizeLayout=function(){var a=d(this.element);return this.size&&a&&a.innerWidth!==this.size.innerWidth};e.addItems=function(a){a=this._itemize(a);a.length&&(this.items=this.items.concat(a));return a};e.appended=function(a){a=this.addItems(a);a.length&&(this.layoutItems(a,!0),this.reveal(a))};e.prepended=function(a){a=this._itemize(a);if(a.length){var c=this.items.slice(0);this.items=a.concat(c);this._resetLayout();this._manageStamps();this.layoutItems(a,!0);this.reveal(a);this.layoutItems(c)}};e.reveal=function(a){this._emitCompleteOnItems("reveal",a);if(a&&a.length){var c=this.updateStagger();a.forEach(function(a,b){a.stagger(b*c);a.reveal()})}};e.hide=function(a){this._emitCompleteOnItems("hide",a);if(a&&a.length){var c=this.updateStagger();a.forEach(function(a,b){a.stagger(b*c);a.hide()})}};e.revealItemElements=function(a){a=this.getItems(a);this.reveal(a)};e.hideItemElements=function(a){a=this.getItems(a);this.hide(a)};e.getItem=function(a){for(var c=0;c<this.items.length;c++){var b=this.items[c];if(b.element==a)return b}};e.getItems=function(a){a=k.makeArray(a);var c=[];a.forEach(function(a){(a=this.getItem(a))&&c.push(a)},this);return c};e.remove=function(a){a=this.getItems(a);this._emitCompleteOnItems("remove",a);a&&a.length&&a.forEach(function(a){a.remove();k.removeFrom(this.items,a)},this)};e.destroy=function(){var a=this.element.style;a.height="";a.position="";a.width="";this.items.forEach(function(a){a.destroy()});this.unbindResize();delete g[this.element.outlayerGUID];delete this.element.outlayerGUID;p&&p.removeData(this.element,this.constructor.namespace)};h.data=function(a){return(a=(a=k.getQueryElement(a))&&a.outlayerGUID)&&g[a]};h.create=function(c,b){var g=n(h);g.defaults=k.extend({},h.defaults);k.extend(g.defaults,b);g.compatOptions=k.extend({},h.compatOptions);g.namespace=c;g.data=h.data;g.Item=n(a);k.htmlInit(g,c);p&&p.bridget&&p.bridget(c,g);return g};var r={ms:1,s:1E3};h.Item=a;return h});(function(b,m){b.Packery=b.Packery||{};b.Packery.Rect=m()})(window,function(){function b(d){for(var k in b.defaults)this[k]=b.defaults[k];for(k in d)this[k]=d[k]}b.defaults={x:0,y:0,width:0,height:0};var m=b.prototype;m.contains=function(b){var d=b.width||0,a=b.height||0;return this.x<=b.x&&this.y<=b.y&&this.x+this.width>=b.x+d&&this.y+this.height>=b.y+a};m.overlaps=function(b){var d=this.x+this.width,a=this.y+this.height,h=b.y+b.height;return this.x<b.x+b.width&&d>b.x&&this.y<h&&a>b.y};m.getMaximalFreeRects=function(d){if(!this.overlaps(d))return!1;var k=[],a,h=this.x+this.width,m=this.y+this.height,l=d.x+d.width,p=d.y+d.height;this.y<d.y&&(a=new b({x:this.x,y:this.y,width:this.width,height:d.y-this.y}),k.push(a));h>l&&(a=new b({x:l,y:this.y,width:h-l,height:this.height}),k.push(a));m>p&&(a=new b({x:this.x,y:p,width:this.width,height:m-p}),k.push(a));this.x<d.x&&(a=new b({x:this.x,y:this.y,width:d.x-this.x,height:this.height}),k.push(a));return k};m.canFit=function(b){return this.width>=b.width&&this.height>=b.height};return b});(function(b,m){Packery.Packer=m(Packery.Rect)})(window,function(b){function m(a,b,d){this.width=a||0;this.height=b||0;this.sortDirection=d||"downwardLeftToRight";this.reset()}var d=m.prototype;d.reset=function(){this.spaces=[];var a=new b({x:0,y:0,width:this.width,height:this.height});this.spaces.push(a);this.sorter=k[this.sortDirection]||k.downwardLeftToRight};d.pack=function(a){for(var b=0;b<this.spaces.length;b++){var d=this.spaces[b];if(d.canFit(a)){this.placeInSpace(a,d);break}}};d.columnPack=function(a){for(var b=0;b<this.spaces.length;b++){var d=this.spaces[b];if(d.x<=a.x&&d.x+d.width>=a.x+a.width&&d.height>=a.height-.01){a.y=d.y;this.placed(a);break}}};d.rowPack=function(a){for(var b=0;b<this.spaces.length;b++){var d=this.spaces[b];if(d.y<=a.y&&d.y+d.height>=a.y+a.height&&d.width>=a.width-.01){a.x=d.x;this.placed(a);break}}};d.placeInSpace=function(a,b){a.x=b.x;a.y=b.y;this.placed(a)};d.placed=function(a){for(var b=[],d=0;d<this.spaces.length;d++){var l=this.spaces[d],k=l.getMaximalFreeRects(a);k?b.push.apply(b,k):b.push(l)}this.spaces=b;this.mergeSortSpaces()};d.mergeSortSpaces=function(){m.mergeRects(this.spaces);this.spaces.sort(this.sorter)};d.addSpace=function(a){this.spaces.push(a);this.mergeSortSpaces()};m.mergeRects=function(a){var b=0,d=a[b];a:for(;d;){for(var l=0,k=a[b+l];k;){if(k==d)l++;else if(k.contains(d)){a.splice(b,1);d=a[b];continue a}else d.contains(k)?a.splice(b+l,1):l++;k=a[b+l]}b++;d=a[b]}return a};var k={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return m});(function(b,m){b.Packery.Item=m(b.Outlayer,b.Packery.Rect)})(window,function(b,m){var d="string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform",k=function(){b.Item.apply(this,arguments)},a=k.prototype=Object.create(b.Item.prototype),h=a._create;a._create=function(){h.call(this);this.rect=new m};var n=a.moveTo;a.moveTo=function(a,b){var c=Math.abs(this.position.x-a),d=Math.abs(this.position.y-b);this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&1>c&&1>d?this.goTo(a,b):n.apply(this,arguments)};a.enablePlacing=function(){this.removeTransitionStyles();this.isTransitioning&&d&&(this.element.style[d]="none");this.isTransitioning=!1;this.getSize();this.layout._setRectSize(this.element,this.rect);this.isPlacing=!0};a.disablePlacing=function(){this.isPlacing=!1};a.removeElem=function(){this.element.parentNode.removeChild(this.element);this.layout.packer.addSpace(this.rect);this.emitEvent("remove",[this])};a.showDropPlaceholder=function(){var a=this.dropPlaceholder;a||(a=this.dropPlaceholder=document.createElement("div"),a.className="packery-drop-placeholder",a.style.position="absolute");a.style.width=this.size.width+"px";a.style.height=this.size.height+"px";this.positionDropPlaceholder();this.layout.element.appendChild(a)};a.positionDropPlaceholder=function(){this.dropPlaceholder.style[d]="translate("+this.rect.x+"px, "+this.rect.y+"px)"};a.hideDropPlaceholder=function(){var a=this.dropPlaceholder.parentNode;a&&a.removeChild(this.dropPlaceholder)};return k});(function(b,m){b.Packery=m(b.getSize,b.Outlayer,b.Packery.Rect,b.Packery.Packer,b.Packery.Item)})(window,function(b,m,d,k,a){function h(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function n(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}d.prototype.canFit=function(a){return this.width>=a.width-1&&this.height>=a.height-1};var l=m.create("packery");l.Item=a;a=l.prototype;a._create=function(){m.prototype._create.call(this);this.packer=new k;this.shiftPacker=new k;this.isEnabled=!0;this.dragItemCount=0;var a=this;this.handleDraggabilly={dragStart:function(){a.itemDragStart(this.element)},dragMove:function(){a.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){a.itemDragEnd(this.element)}};this.handleUIDraggable={start:function(c,b){b&&a.itemDragStart(c.currentTarget)},drag:function(c,b){b&&a.itemDragMove(c.currentTarget,b.position.left,b.position.top)},stop:function(c,b){b&&a.itemDragEnd(c.currentTarget)}}};a._resetLayout=function(){this.getSize();this._getMeasurements();var a,b,g;this._getOption("horizontal")?(a=Infinity,b=this.size.innerHeight+this.gutter,g="rightwardTopToBottom"):(a=this.size.innerWidth+this.gutter,b=Infinity,g="downwardLeftToRight");this.packer.width=this.shiftPacker.width=a;this.packer.height=this.shiftPacker.height=b;this.packer.sortDirection=this.shiftPacker.sortDirection=g;this.packer.reset();this.maxX=this.maxY=0};a._getMeasurements=function(){this._getMeasurement("columnWidth","width");this._getMeasurement("rowHeight","height");this._getMeasurement("gutter","width")};a._getItemLayoutPosition=function(a){this._setRectSize(a.element,a.rect);if(this.isShifting||0<this.dragItemCount){var c=this._getPackMethod();this.packer[c](a.rect)}else this.packer.pack(a.rect);this._setMaxXY(a.rect);return a.rect};a.shiftLayout=function(){this.isShifting=!0;this.layout();delete this.isShifting};a._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"};a._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX);this.maxY=Math.max(a.y+a.height,this.maxY)};a._setRectSize=function(a,d){var c=b(a),e=c.outerWidth,c=c.outerHeight;if(e||c)e=this._applyGridGutter(e,this.columnWidth),c=this._applyGridGutter(c,this.rowHeight);d.width=Math.min(e,this.packer.width);d.height=Math.min(c,this.packer.height)};a._applyGridGutter=function(a,b){if(!b)return a+this.gutter;b+=this.gutter;var c=a%b;return a=Math[c&&1>c?"round":"ceil"](a/b)*b};a._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}};a._manageStamp=function(a){var b=this.getItem(a);b&&b.isPlacing?b=b.rect:(b=this._getElementOffset(a),b=new d({x:this._getOption("originLeft")?b.left:b.right,y:this._getOption("originTop")?b.top:b.bottom}));this._setRectSize(a,b);this.packer.placed(b);this._setMaxXY(b)};a.sortItemsByPosition=function(){var a=this._getOption("horizontal")?n:h;this.items.sort(a)};a.fit=function(a,b,d){if(a=this.getItem(a))this.stamp(a.element),a.enablePlacing(),this.updateShiftTargets(a),b=void 0===b?a.rect.x:b,d=void 0===d?a.rect.y:d,this.shift(a,b,d),this._bindFitEvents(a),a.moveTo(a.rect.x,a.rect.y),this.shiftLayout(),this.unstamp(a.element),this.sortItemsByPosition(),a.disablePlacing()};a._bindFitEvents=function(a){function b(){d++;2==d&&c.dispatchEvent("fitComplete",null,[a])}var c=this,d=0;a.once("layout",b);this.once("layoutComplete",b)};a.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())};a.needsResizeLayout=function(){var a=b(this.element),d=this._getOption("horizontal")?"innerHeight":"innerWidth";return a[d]!=this.size[d]};a.resizeShiftPercentLayout=function(){var a=this._getItemsForLayout(this.items),d=this._getOption("horizontal"),g=d?"y":"x",e=d?"height":"width",k=d?"rowHeight":"columnWidth",d=d?"innerHeight":"innerWidth",f=this[k];if(f=f&&f+this.gutter){this._getMeasurements();var h=this[k]+this.gutter;a.forEach(function(a){a.rect[g]=Math.round(a.rect[g]/f)*h})}else{var l=b(this.element)[d]+this.gutter,m=this.packer[e];a.forEach(function(a){a.rect[g]=a.rect[g]/m*l})}this.shiftLayout()};a.itemDragStart=function(a){this.isEnabled&&(this.stamp(a),a=this.getItem(a))&&(a.enablePlacing(),a.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(a))};a.updateShiftTargets=function(a){this.shiftPacker.reset();this._getBoundingRect();var b=this._getOption("originLeft"),c=this._getOption("originTop");this.stamps.forEach(function(a){var e=this.getItem(a);e&&e.isPlacing||(e=this._getElementOffset(a),e=new d({x:b?e.left:e.right,y:c?e.top:e.bottom}),this._setRectSize(a,e),this.shiftPacker.placed(e))},this);var e=this._getOption("horizontal"),k=e?"height":"width";this.shiftTargetKeys=[];this.shiftTargets=[];var f,h=this[e?"rowHeight":"columnWidth"];if(h=h&&h+this.gutter){var l=Math.floor((this.shiftPacker[k]+this.gutter)/h);f=(l-Math.ceil(a.rect[k]/h))*h;for(a=0;a<l;a++)this._addShiftTarget(e?0:a*h,e?a*h:0,f)}else f=this.shiftPacker[k]+this.gutter-a.rect[k],this._addShiftTarget(0,0,f);var l=this._getItemsForLayout(this.items),m=this._getPackMethod();l.forEach(function(a){var b=a.rect;this._setRectSize(a.element,b);this.shiftPacker[m](b);this._addShiftTarget(b.x,b.y,f);a=e?b.x+b.width:b.x;var c=e?b.y:b.y+b.height;this._addShiftTarget(a,c,f);if(h)for(var d=Math.round(b[k]/h),g=1;g<d;g++)this._addShiftTarget(e?a:b.x+h*g,e?b.y+h*g:c,f)},this)};a._addShiftTarget=function(a,b,d){var c=this._getOption("horizontal")?b:a;0!==c&&c>d||(d=a+","+b,-1==this.shiftTargetKeys.indexOf(d)&&(this.shiftTargetKeys.push(d),this.shiftTargets.push({x:a,y:b})))};a.shift=function(a,b,d){var c,g=Infinity;this.shiftTargets.forEach(function(a){var e;e=b-a.x;var f=d-a.y;e=Math.sqrt(e*e+f*f);e<g&&(c=a,g=e)});a.rect.x=c.x;a.rect.y=c.y};a.itemDragMove=function(a,b,d){function c(){f.shift(g,b,d);g.positionDropPlaceholder();f.layout()}var g=this.isEnabled&&this.getItem(a);if(g){b-=this.size.paddingLeft;d-=this.size.paddingTop;var f=this;a=new Date;this._itemDragTime&&120>a-this._itemDragTime?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(c,120)):(c(),this._itemDragTime=a)}};a.itemDragEnd=function(a){function b(){d++;2==d&&(c.element.classList.remove("is-positioning-post-drag"),c.hideDropPlaceholder(),h.dispatchEvent("dragItemPositioned",null,[c]))}var c=this.isEnabled&&this.getItem(a);if(c){clearTimeout(this.dragTimeout);c.element.classList.add("is-positioning-post-drag");var d=0,h=this;c.once("layout",b);this.once("layoutComplete",b);c.moveTo(c.rect.x,c.rect.y);this.layout();this.dragItemCount=Math.max(0,this.dragItemCount-1);this.sortItemsByPosition();c.disablePlacing();this.unstamp(c.element)}};a.bindDraggabillyEvents=function(a){this._bindDraggabillyEvents(a,"on")};a.unbindDraggabillyEvents=function(a){this._bindDraggabillyEvents(a,"off")};a._bindDraggabillyEvents=function(a,b){var c=this.handleDraggabilly;a[b]("dragStart",c.dragStart);a[b]("dragMove",c.dragMove);a[b]("dragEnd",c.dragEnd)};a.bindUIDraggableEvents=function(a){this._bindUIDraggableEvents(a,"on")};a.unbindUIDraggableEvents=function(a){this._bindUIDraggableEvents(a,"off")};a._bindUIDraggableEvents=function(a,b){var c=this.handleUIDraggable;a[b]("dragstart",c.start)[b]("drag",c.drag)[b]("dragstop",c.stop)};var p=a.destroy;a.destroy=function(){p.apply(this,arguments);this.isEnabled=!1};l.Rect=d;l.Packer=k;return l});
/*!
 * modified for babel Draggabilly PACKAGED v2.1.1
 * Make that shiz draggable
 * draggabilly.desandro.com
 * MIT license
 * removed jQuery support
 * removed AMD, CommonJS support
 * changed this or global to window as argument
 * added if("undefined"==typeof window||!("document"in window))
 * {return console.log("window is undefined or document is not in window"),!1;}
 * won't pass jshint
 * closure-compiler.appspot.com/code/jsc791a430ae9a0fab140f8a5be98233036/default.js
 */
;(function(h,g){if("undefined"==typeof h||!("document"in h))return console.log("window is undefined or document is not in window"),!1;h.getSize=g()})(window,function(){function h(b){var a=parseFloat(b);return-1==b.indexOf("%")&&!isNaN(a)&&a}function g(){}function f(b){(b=getComputedStyle(b))||c("Style returned "+b+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1");return b}function d(c){if(!k){k=!0;var e=document.createElement("div");e.style.width="200px";e.style.padding="1px 2px 3px 4px";e.style.borderStyle="solid";e.style.borderWidth="1px 2px 3px 4px";e.style.boxSizing="border-box";var g=document.body||document.documentElement;g.appendChild(e);var m=f(e);d.isBoxSizeOuter=n=200==h(m.width);g.removeChild(e)}"string"==typeof c&&(c=document.querySelector(c));if(c&&"object"==typeof c&&c.nodeType){g=f(c);if("none"==g.display){e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(g=0;g<b;g++)e[a[g]]=0;return e}e={};e.width=c.offsetWidth;e.height=c.offsetHeight;c=e.isBorderBox="border-box"==g.boxSizing;for(m=0;m<b;m++){var p=a[m],q=parseFloat(g[p]);e[p]=isNaN(q)?0:q}var m=e.paddingLeft+e.paddingRight,p=e.paddingTop+e.paddingBottom,q=e.marginLeft+e.marginRight,v=e.marginTop+e.marginBottom,r=e.borderLeftWidth+e.borderRightWidth,t=e.borderTopWidth+e.borderBottomWidth;c=c&&n;var l=h(g.width);!1!==l&&(e.width=l+(c?0:m+r));g=h(g.height);!1!==g&&(e.height=g+(c?0:p+t));e.innerWidth=e.width-(m+r);e.innerHeight=e.height-(p+t);e.outerWidth=e.width+q;e.outerHeight=e.height+v;return e}}var c="undefined"==typeof console?g:function(b){console.error(b)},a="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" "),b=a.length,k=!1,n;return d});(function(h,g){window.EvEmitter=g()})(window,function(){function h(){}var g=h.prototype;g.on=function(f,d){if(f&&d){var c=this._events=this._events||{},c=c[f]=c[f]||[];-1==c.indexOf(d)&&c.push(d);return this}};g.once=function(f,d){if(f&&d){this.on(f,d);var c=this._onceEvents=this._onceEvents||{};(c[f]=c[f]||{})[d]=!0;return this}};g.off=function(f,d){var c=this._events&&this._events[f];if(c&&c.length){var a=c.indexOf(d);-1!=a&&c.splice(a,1);return this}};g.emitEvent=function(f,d){var c=this._events&&this._events[f];if(c&&c.length){var a=0,b=c[a];d=d||[];for(var k=this._onceEvents&&this._onceEvents[f];b;){var g=k&&k[b];g&&(this.off(f,b),delete k[b]);b.apply(this,d);a+=g?0:1;b=c[a]}return this}};return h});(function(h,g){h.Unipointer=g(h,h.EvEmitter)})(window,function(h,g){function f(){}var d=f.prototype=Object.create(g.prototype);d.bindStartEvent=function(a){this._bindStartEvent(a,!0)};d.unbindStartEvent=function(a){this._bindStartEvent(a,!1)};d._bindStartEvent=function(a,b){var c=void 0===b||b?"addEventListener":"removeEventListener";if(h.navigator.pointerEnabled)a[c]("pointerdown",this);else if(h.navigator.msPointerEnabled)a[c]("MSPointerDown",this);else a[c]("mousedown",this),a[c]("touchstart",this)};d.handleEvent=function(a){var b="on"+a.type;if(this[b])this[b](a)};d.getTouch=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.identifier==this.pointerIdentifier)return c}};d.onmousedown=function(a){var b=a.button;b&&0!==b&&1!==b||this._pointerDown(a,a)};d.ontouchstart=function(a){this._pointerDown(a,a.changedTouches[0])};d.onMSPointerDown=d.onpointerdown=function(a){this._pointerDown(a,a)};d._pointerDown=function(a,b){this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==b.pointerId?b.pointerId:b.identifier,this.pointerDown(a,b))};d.pointerDown=function(a,b){this._bindPostStartEvents(a);this.emitEvent("pointerDown",[a,b])};var c={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};d._bindPostStartEvents=function(a){a&&(a=c[a.type],a.forEach(function(b){h.addEventListener(b,this)},this),this._boundPointerEvents=a)};d._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(a){h.removeEventListener(a,this)},this),delete this._boundPointerEvents)};d.onmousemove=function(a){this._pointerMove(a,a)};d.onMSPointerMove=d.onpointermove=function(a){a.pointerId==this.pointerIdentifier&&this._pointerMove(a,a)};d.ontouchmove=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerMove(a,b)};d._pointerMove=function(a,b){this.pointerMove(a,b)};d.pointerMove=function(a,b){this.emitEvent("pointerMove",[a,b])};d.onmouseup=function(a){this._pointerUp(a,a)};d.onMSPointerUp=d.onpointerup=function(a){a.pointerId==this.pointerIdentifier&&this._pointerUp(a,a)};d.ontouchend=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerUp(a,b)};d._pointerUp=function(a,b){this._pointerDone();this.pointerUp(a,b)};d.pointerUp=function(a,b){this.emitEvent("pointerUp",[a,b])};d._pointerDone=function(){this.isPointerDown=!1;delete this.pointerIdentifier;this._unbindPostStartEvents();this.pointerDone()};d.pointerDone=function(){};d.onMSPointerCancel=d.onpointercancel=function(a){a.pointerId==this.pointerIdentifier&&this._pointerCancel(a,a)};d.ontouchcancel=function(a){var b=this.getTouch(a.changedTouches);b&&this._pointerCancel(a,b)};d._pointerCancel=function(a,b){this._pointerDone();this.pointerCancel(a,b)};d.pointerCancel=function(a,b){this.emitEvent("pointerCancel",[a,b])};f.getPointerPoint=function(a){return{x:a.pageX,y:a.pageY}};return f});(function(h,g){h.Unidragger=g(h,h.Unipointer)})(window,function(h,g){function f(){}function d(){}var c=d.prototype=Object.create(g.prototype);c.bindHandles=function(){this._bindHandles(!0)};c.unbindHandles=function(){this._bindHandles(!1)};var a=h.navigator;c._bindHandles=function(b){b=void 0===b?!0:!!b;var c;c=a.pointerEnabled?function(a){a.style.touchAction=b?"none":""}:a.msPointerEnabled?function(a){a.style.msTouchAction=b?"none":""}:f;for(var d=b?"addEventListener":"removeEventListener",g=0;g<this.handles.length;g++){var e=this.handles[g];this._bindStartEvent(e,b);c(e);e[d]("click",this)}};c.pointerDown=function(b,a){if("INPUT"==b.target.nodeName&&"range"==b.target.type)this.isPointerDown=!1,delete this.pointerIdentifier;else{this._dragPointerDown(b,a);var c=document.activeElement;c&&c.blur&&c.blur();this._bindPostStartEvents(b);this.emitEvent("pointerDown",[b,a])}};c._dragPointerDown=function(b,a){this.pointerDownPoint=g.getPointerPoint(a);this.canPreventDefaultOnPointerDown(b,a)&&b.preventDefault()};c.canPreventDefaultOnPointerDown=function(b){return"SELECT"!=b.target.nodeName};c.pointerMove=function(b,a){var c=this._dragPointerMove(b,a);this.emitEvent("pointerMove",[b,a,c]);this._dragMove(b,a,c)};c._dragPointerMove=function(b,a){var c=g.getPointerPoint(a),c={x:c.x-this.pointerDownPoint.x,y:c.y-this.pointerDownPoint.y};!this.isDragging&&this.hasDragStarted(c)&&this._dragStart(b,a);return c};c.hasDragStarted=function(b){return 3<Math.abs(b.x)||3<Math.abs(b.y)};c.pointerUp=function(b,a){this.emitEvent("pointerUp",[b,a]);this._dragPointerUp(b,a)};c._dragPointerUp=function(b,a){this.isDragging?this._dragEnd(b,a):this._staticClick(b,a)};c._dragStart=function(b,a){this.isDragging=!0;this.dragStartPoint=g.getPointerPoint(a);this.isPreventingClicks=!0;this.dragStart(b,a)};c.dragStart=function(a,c){this.emitEvent("dragStart",[a,c])};c._dragMove=function(a,c,d){this.isDragging&&this.dragMove(a,c,d)};c.dragMove=function(a,c,d){a.preventDefault();this.emitEvent("dragMove",[a,c,d])};c._dragEnd=function(a,c){this.isDragging=!1;setTimeout(function(){delete this.isPreventingClicks}.bind(this));this.dragEnd(a,c)};c.dragEnd=function(a,c){this.emitEvent("dragEnd",[a,c])};c.onclick=function(a){this.isPreventingClicks&&a.preventDefault()};c._staticClick=function(a,c){if(!this.isIgnoringMouseUp||"mouseup"!=a.type){var b=a.target.nodeName;"INPUT"!=b&&"TEXTAREA"!=b||a.target.focus();this.staticClick(a,c);"mouseup"!=a.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))}};c.staticClick=function(a,c){this.emitEvent("staticClick",[a,c])};d.getPointerPoint=g.getPointerPoint;return d});(function(h,g){h.Draggabilly=g(h,h.getSize,h.Unidragger)})(window,function(h,g,f){function d(a,b){for(var c in b)a[c]=b[c];return a}function c(a,c){this.element="string"==typeof a?b.querySelector(a):a;e&&(this.$element=e(this.element));this.options=d({},this.constructor.defaults);this.option(c);this._create()}function a(a,b,c){return b?Math[c||"round"](a/b)*b:a}var b=h.document,k=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame,n=0;k||(k=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-n));a=setTimeout(a,c);n=b+c;return a});var l="string"==typeof b.documentElement.style.transform?"transform":"WebkitTransform",e=h.jQuery;f=c.prototype=Object.create(f.prototype);c.defaults={};f.option=function(a){d(this.options,a)};var u={relative:!0,absolute:!0,fixed:!0};f._create=function(){this.position={};this._getPosition();this.startPoint={x:0,y:0};this.dragPoint={x:0,y:0};this.startPosition=d({},this.position);var a=getComputedStyle(this.element);u[a.position]||(this.element.style.position="relative");this.enable();this.setHandles()};f.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element];this.bindHandles()};f.dispatchEvent=function(a,b,c){var d=[b].concat(c);this.emitEvent(a,d);(d=h.jQuery)&&this.$element&&(b?(b=d.Event(b),b.type=a,this.$element.trigger(b,c)):this.$element.trigger(a,c))};f._getPosition=function(){var a=getComputedStyle(this.element),b=this._getPositionCoord(a.left,"width"),c=this._getPositionCoord(a.top,"height");this.position.x=isNaN(b)?0:b;this.position.y=isNaN(c)?0:c;this._addTransformPosition(a)};f._getPositionCoord=function(a,b){if(-1!=a.indexOf("%")){var c=g(this.element.parentNode);return c?parseFloat(a)/100*c[b]:0}return parseInt(a,10)};f._addTransformPosition=function(a){var b=a[l];if(0===b.indexOf("matrix")){a=b.split(",");var c=0===b.indexOf("matrix3d")?12:4,b=parseInt(a[c],10);a=parseInt(a[c+1],10);this.position.x+=b;this.position.y+=a}};f.pointerDown=function(a,c){this._dragPointerDown(a,c);var d=b.activeElement;d&&d.blur&&d!=b.body&&d.blur();this._bindPostStartEvents(a);this.element.classList.add("is-pointer-down");this.dispatchEvent("pointerDown",a,[c])};f.pointerMove=function(a,b){var c=this._dragPointerMove(a,b);this.dispatchEvent("pointerMove",a,[b,c]);this._dragMove(a,b,c)};f.dragStart=function(a,b){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",a,[b]),this.animate())};f.measureContainment=function(){var a=this.options.containment;if(a){var c=a instanceof HTMLElement?a:"string"==typeof a?b.querySelector(a):this.element.parentNode,a=g(this.element),d=g(c),e=this.element.getBoundingClientRect(),f=c.getBoundingClientRect(),c=d.borderLeftWidth+d.borderRightWidth,h=d.borderTopWidth+d.borderBottomWidth,e=this.relativeStartPosition={x:e.left-(f.left+d.borderLeftWidth),y:e.top-(f.top+d.borderTopWidth)};this.containSize={width:d.width-c-e.x-a.width,height:d.height-h-e.y-a.height}}};f.dragMove=function(b,c,d){if(this.isEnabled){var e=d.x,f=d.y,g=this.options.grid,h=g&&g[0],g=g&&g[1],e=a(e,h),f=a(f,g),e=this.containDrag("x",e,h),f=this.containDrag("y",f,g),e="y"==this.options.axis?0:e,f="x"==this.options.axis?0:f;this.position.x=this.startPosition.x+e;this.position.y=this.startPosition.y+f;this.dragPoint.x=e;this.dragPoint.y=f;this.dispatchEvent("dragMove",b,[c,d])}};f.containDrag=function(b,c,d){if(!this.options.containment)return c;var e="x"==b?"width":"height";b=a(-this.relativeStartPosition[b],d,"ceil");e=this.containSize[e];e=a(e,d,"floor");return Math.min(e,Math.max(b,c))};f.pointerUp=function(a,b){this.element.classList.remove("is-pointer-down");this.dispatchEvent("pointerUp",a,[b]);this._dragPointerUp(a,b)};f.dragEnd=function(a,b){this.isEnabled&&(l&&(this.element.style[l]="",this.setLeftTop()),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",a,[b]))};f.animate=function(){if(this.isDragging){this.positionDrag();var a=this;k(function(){a.animate()})}};f.setLeftTop=function(){this.element.style.left=this.position.x+"px";this.element.style.top=this.position.y+"px"};f.positionDrag=function(){this.element.style[l]="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"};f.staticClick=function(a,b){this.dispatchEvent("staticClick",a,[b])};f.enable=function(){this.isEnabled=!0};f.disable=function(){this.isEnabled=!1;this.isDragging&&this.dragEnd()};f.destroy=function(){this.disable();this.element.style[l]="";this.element.style.left="";this.element.style.top="";this.element.style.position="";this.unbindHandles();this.$element&&this.$element.removeData("draggabilly")};f._init=function(){};e&&e.bridget&&e.bridget("draggabilly",c);return c});
