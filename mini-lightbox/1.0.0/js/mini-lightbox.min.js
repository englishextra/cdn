// MiniLightbox
// </> with <3 by Ionică Bizău
(function(e){function t(e,t){var n=document.querySelectorAll(e);for(var r=0;r<n.length;r++)if(n[r]===t)return!0;return!1}function n(e){var i=e.selector||e,s=document.querySelectorAll(i),o=function(e){var t=this.id,i=r[t];t||this.setAttribute("id",t="ml_"+Math.random().toString(36));if(i)n.open(t);else{var s=document.createElement("div");s.setAttribute("class","ml_box");var o=document.createElement("img");o.setAttribute("src",this.getAttribute("data-image-opened")||this.src),s.appendChild(o),s.addEventListener("click",function(){n.close(t)}),r[t]={el:this,box:s,img:o,opened:!1},document.body.appendChild(s),n.open(t)}e.preventDefault()};for(var u=0;u<s.length;++u)new Image(s[u].getAttribute("data-image-opened"));if(e.delegation)return document.querySelector(e.delegation).addEventListener("click",function(n){var r=n.target,i=[r];while(r)i.push(r=r.parentNode);for(var s=0;s<i.length;++s){var u=i[s];if(t(e.selector,u)&&(r=u))break}if(!r||r.tagName!=="IMG"||r.parentNode.classList.contains("ml_box"))return;o.call(r,n)});for(var u=0;u<s.length;++u)(function(e){e.addEventListener("click",o)})(s[u])}e.addEventListener("scroll",function(){n.close()}),e.addEventListener("keydown",function(e){if(e.which!==27)return;n.close()}),n.close=function(e){if(!e){var t=Object.keys(r);for(var i=0;i<t.length;++i)n.close(t[i]);return}if(!r[e].opened)return;r[e].opened=!1;if(typeof n.customClose=="function"&&n.customClose.call(r[e])===!1)return;r[e].box.style.display="none"},n.open=function(e){if(r[e].opened)return;r[e].opened=!0;if(typeof n.customOpen=="function"&&n.customOpen.call(r[e])===!1)return;r[e].box.style.display="block"};var r=n._cache={};e.MiniLightbox=n})(this);